@model www.Models.Legislation
@{
    ViewBag.Title = @Model.Name + @" - myLegis";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
@*
<a data-toggle="modal" data-target="#myModal" style="cursor: pointer;">AS 47.25.120</a>  
*@ @*<style type="text/css">

      /* Sticky footer styles
      -------------------------------------------------- */
    
      html,
      body {
        height: 100%;
        /* The html and body elements cannot have any padding or margin. */
      }

      /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -60px;
      }

      /* Set the fixed height of the footer here */
      #push,
      #footer {
        height: 60px;
      }
      #footer {
        background-color: #f5f5f5;
      }

      /* Lastly, apply responsive CSS fixes as necessary */
      @@media (max-width: 767px) {
        #footer {
          margin-left: -20px;
          margin-right: -20px;
          padding-left: 20px;
          padding-right: 20px;
        }
      }

      /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      .billtext {
        width: auto;
        padding-top : 0px;
        max-width: 900px; 
        font-size: 12px;
      }
      
      pre > a:link 
      {
        text-decoration : underline;
      }
      
      .gitBackGround 
      {
       background-color: #DDFFDD !important;   
       }
    </style>*@
<!-- Part 1: Wrap all page content here -->
@*<div id="wrap">
    <!-- Begin page content -->
    <div class="container">
        <div id="myModal" class="modal hide fade">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;</button>
                <h3>
                    Statute Description</h3>
            </div>
            <div class="modal-body">
                <p>
                    Sec. 47.25.130. Amount and type of assistance.
                </p>
                <p>
                    (a) The amount of assistance for a needy person shall be determined by the department
                    with regard to the resources and needs of the person and the conditions existing
                    in each case. Where possible, assistance shall be sufficient to provide the applicant
                    with reasonable subsistence according to standards of assistance established by
                    the department. However, the amount of assistance for subsistence needs may not
                    exceed $120 a person a calendar month.
                </p>
                <p>
                    (b) The department may enter into competitively awarded group service agreements
                    with providers, and may require needy persons under AS 47.25.120 - 47.25.300 to
                    obtain services from these designated providers.
                </p>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>
            </div>
        </div>
        <div class="masthead">
            <div class="navbar" style="padding-top: 20px;">
                <div class="navbar-inner">
                    <div class="container">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar">
                            </span></a><a class="brand" href="#">myLegis</a>
                        <div class="nav-collapse collapse navbar-responsive-collapse">
                            <ul class="nav">
                                <li class="active"><a href="#">Home</a></li>
                            </ul>
                            <ul class="nav pull-right">
                                <form class="navbar-form pull-left">
                                <input type="text" class="span2" />
                                <button type="submit" class="btn">
                                    Search</button>
                                </form>
                            </ul>
                        </div>
                        <!-- /.nav-collapse -->
                    </div>
                </div>
                <!-- /navbar-inner -->
            </div>
            <ul class="breadcrumb">
                <li><a href="#">Home</a> <span class="divider">/</span></li>
                <li><a href="#">28th Body</a> <span class="divider">/</span></li>
                <li class="active">@Model.Name [ @Html.Raw(@Model.ShortTitle) ]</li>
            </ul>
        </div>
        <div class="page-header">
            <blockquote style="font-size: 18px;">
                @Model.Title
            </blockquote>
            <cite><a href="#">@Model.Name</a></cite>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <!--Body content-->
                <ul id="myTab" class="nav nav-tabs">
                    <li class="active"><a href="#bill" data-toggle="tab">Bill Text</a></li>
                    <li class=""><a href="#sponsorship" data-toggle="tab">Legislature</a></li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade active in" id="bill">
                        <pre class="billtext" style="background-color: #f7f2e6;">  
                            @Model.Copy 
                        </pre>
                    </div>
                    <div class="tab-pane fade" id="sponsorship">
                        <div class="span12">
                            <div class="span5">
                                <!--Sidebar content-->
                                <table class="table table-condensed table-bordered table-striped">
                                    <caption>
                                        Bill History</caption>
                                    <thead>
                                        <tr>
                                            <th style="width: 45px; text-align: center;">
                                                Date
                                            </th>
                                            <th>
                                                Action
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var a in Model.Activity.Where(n => n.Date == null))
                                        {
                                            <tr>
                                                <td style="font-family: Courier;">
                                                    no date
                                                </td>
                                                <td style="background-color: #DDFFDD;">
                                                    <p>@a.Description</p>
                                                    @if (!String.IsNullOrEmpty(a.Sha))
                                                    {
                                                        <label style="text-align: right; width: 100%;">
                                                            <a href="https://github.com/ragingsmurf/myLegis/commit/@a.Sha" class="btn btn-small">@a.Sha
                                                                <icon class=" icon-arrow-right" />
                                                            </a>
                                                        </label>                                                        
                                                    }
                                                </td>
                                            </tr>
                                        }
                                        @foreach (var a in Model.Activity.Where(n => n.Date != null))
                                        {

                                            if (!String.IsNullOrEmpty(a.Sha))
                                            {
                                            <tr>
                                                <td style="font-family: Courier;">
                                                    @a.Date.Value.ToShortDateString()
                                                </td>
                                                <td style="background-color: #DDFFDD;">
                                                    <p>@a.Description</p>
                                                    <label style="text-align: right; width: 100%;">
                                                        <a href="https://github.com/ragingsmurf/myLegis/commit/@a.Sha" class="btn btn-small">@a.Sha
                                                            <icon class=" icon-arrow-right" />
                                                        </a>
                                                    </label>
                                                </td>
                                            </tr>
                                            }
                                            else
                                            { 
                                            <tr>
                                                <td style="font-family: Courier;">
                                                    @a.Date.Value.ToShortDateString()
                                                </td>
                                                <td>
                                                    <p>@a.Description</p>
                                                </td>
                                            </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                            <div class="span7" style="">
                                <table class="table table-condensed" style="background-color: #fff; border-left: 0px;">
                                    <thead>
                                        <tr>
                                            <th colspan="2">
                                                Sponsor Details
                                            </th>
                                        </tr>
                                        <tr>
                                            <th colspan="2">
                                                @Model.Sponsors
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <img align="left" class="img-polaroid" src="http://w3.legis.state.ak.us/images/house/AUS.jpg"
                                                    alt="Guy" />
                                            </td>
                                            <td style="width: 70%; padding-left: 3px;">
                                                <div class="span6" style="padding-left: 3px;">
                                                    <h5 style="padding-left: 5px;">
                                                        Alan Austerman</h5>
                                                    <span class="visible-phone" style="margin-bottom: 5px; margin-top: 5px;">
                                                        <button class="btn btn-large btn-primary" type="button">
                                                            DIAL 800-465-2487</button>
                                                    </span>
                                                    <h5 style="padding-left: 10px; margin-bottom: 1px;">
                                                        Session Contact</h5>
                                                    <address style="margin-bottom: 5px; line-height: 16px; padding-left: 10px;">
                                                        <span class="visible-phone" style="margin-bottom: 0px; margin-top: 5px;">
                                                            <button class="btn btn-large btn-primary" type="button">
                                                                DIAL 907-465-2487</button>
                                                        </span><span style="display: block; padding: 3px;">State Capitol Room 505<br />
                                                            Juneau AK, 99801<br />
                                                        </span>
                                                        <abbr class="hidden-phone" title="Phone">
                                                            P:</abbr>
                                                        <span class="hidden-phone">907-465-9876</span>
                                                    </address>
                                                    <h5 style="padding-left: 10px; margin-bottom: 1px;">
                                                        Interim Contact</h5>
                                                    <address style="margin-bottom: 5px; line-height: 16px; padding-left: 10px;">
                                                        <span class="visible-phone" style="margin-bottom: 0px; margin-top: 5px;">
                                                            <button class="btn btn-large btn-primary" type="button">
                                                                DIAL 907-465-2487</button>
                                                        </span><span style="display: block; padding: 3px;">State Capitol Room 505<br />
                                                            Juneau AK, 99801<br />
                                                        </span>
                                                        <abbr class="hidden-phone" title="Phone">
                                                            P:</abbr>
                                                        <span class="hidden-phone">907-465-9876</span>
                                                    </address>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>*@
@{
    ViewBag.Title = "myLegis";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section css {
    @Styles.Render("~/Content/narrowjumbo")
    <style type="text/css">
        .container
        {
            max-width: 980px;
        }
        .bubbledLeft, .bubbledRight
        {
            margin-top: 3px;
            padding: 3px 5px 3px 5px;
            max-width: 80%;
            clear: both;
            border: 1px solid grey;
        }
        .bubbledLeft
        {
            float: left;
            margin-right: auto;
            border: 1px solid grey;
            border-radius: 5px 5px 5px 0px;
            -webkit-border-radius: 5px 5px 5px 0px;
            -moz-border-radius: 5px 5px 5px 0px;
            -o-border-radius: 5px 5px 5px 0px;
            -ms-border-radius: 5px 5px 5px 0px;
            border-width: 7px 5px 5px 11px;
            border-image: url(/content/img/speech_bubble_left.png) 7 5 5 11 stretch stretch;
            -o-border-image: url(/content/img/speech_bubble_left.png) 7 5 5 11 stretch stretch;
            -moz-border-image: url(/content/img/speech_bubble_left.png) 7 5 5 11 stretch stretch;
            -webkit-border-image: url(/content/img/speech_bubble_left.png) 7 5 5 11 stretch stretch;
        }
        .bubbledRight
        {
            padding: 4px 15px 4px 10px; /*position within the border*/
            float: right;
            margin-left: auto;
            text-align: right;
            border: 1px solid grey;
            border-radius: 5px 5px 0px 5px;
            -webkit-border-radius: 5px 5px 0px 5px;
            -moz-border-radius: 5px 5px 0px 5px;
            -o-border-radius: 5px 5px 0px 5px;
            -ms-border-radius: 5px 5px 0px 5px;
            border-width: 7px 11px 5px 5px;
            border-image: url(/content/img/speech_bubble_right.png) 7 11 5 5 stretch stretch;
            -o-border-image: url(/content/img/speech_bubble_right.png) 7 11 5 5 stretch stretch;
            -moz-border-image: url(/content/img/speech_bubble_right.png) 7 11 5 5 stretch stretch;
            -webkit-border-image: url(/content/img/speech_bubble_right.png) 7 11 5 5 stretch stretch;
        }
        
        #contextMenu
        {
            position: absolute;
            display: none;
        }
    </style>
}
<div id="contextMenu" class="dropdown clearfix">
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display: block;
        position: static; margin-bottom: 5px;">
        <li><a tabindex="-1" href="#">Action</a></li>
        <li><a tabindex="-1" href="#">Another action</a></li>
        <li><a tabindex="-1" href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a tabindex="-1" href="#">Separated link</a></li>
    </ul>
</div>
<div class="container" data-bind="event: { contextmenu: ContextMenuClick }">
    <!-- Static navbar -->
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span
                    class="icon-bar"></span><span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">myLegis</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="@Url.Action("Index")">Home</a></li>
                <li><a href="@Url.Action("Senate")">Senate Legislation</a></li>
                <li><a href="@Url.Action("House")">House Legislation</a></li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
    <ol class="breadcrumb">
        <li><a href="@Url.Action("Index")">Home</a> </li>
        <li><a href="@Url.Action(ViewData["Residence"].ToString())">@ViewData["Residence"]</a>
        </li>
        <li class="active"><span class="badge">@Model.Name</span></li>
    </ol>
    <div class="row">
        <div class="col-md-12" style="margin-top: 5px;">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">
                    Details
                </div>
                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#activity" data-toggle="tab">Activity</a></li>
                        <li class=""><a href="#legislation" data-toggle="tab">Legislation</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content" style="padding-top: 10px;">
                        <div class="tab-pane fade in active" id="activity">
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th colspan="2">
                                            @Html.Raw(@Model.ShortTitle)
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="2">
                                            <p>@Model.Title</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 150px; text-align: right;">
                                            Current Status
                                        </td>
                                        <td>
                                            @Model.CurrentStatus
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 150px; text-align: right;">
                                            Status Date
                                        </td>
                                        <td>
                                            @Model.StatusDate
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-condensed table-striped">
                                <thead>
                                    <tr>
                                        <th style="width: 45px; text-align: center;">
                                            Date
                                        </th>
                                        <th>
                                            Action
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var a in Model.Activity.Where(n => n.Date == null))
                                    {
                                        <tr>
                                            <td style="font-family: Courier;">
                                                no date
                                            </td>
                                            <td>
                                                @foreach (www.Models.BillActivity act in Model.Activity
                                                .Where(n => n.Date == null))
                                                {
                                                    if (!(String.IsNullOrEmpty(@act.Sha)))
                                                    {
                                                    <p style="float: left; padding: 5px 0 5px 0; width: 100%;">@act.Description
                                                        <a href="https://github.com/ragingsmurf/myLegisData/commit/@act.Sha" 
                                                            class="btn btn-default
                                                            pull-right" style="margin-right : 5px;" role="button">@act.Sha <span class="glyphicon glyphicon-arrow-right">
                                                            </span></a>
                                                    </p>                                        
                                                    }
                                                    else
                                                    { 
                                                    <p>@act.Description</p>
                                                    }
                                                }
                                            </td>
                                        </tr>
                                    }
                                    @foreach (var a in Model.Activity.Where(n => n.Date != null).GroupBy(act => act.Date).Select(grp => grp.First()))
                                    {
                                        <tr>
                                            <td style="font-family: Courier;">
                                                @a.Date.Value.ToShortDateString()
                                            </td>
                                            <td>
                                                @foreach (www.Models.BillActivity act in Model.Activity
                                                .Where(n => n.Date != null)
                                                .Where(n => n.Date.Value.ToShortDateString() == a.Date.Value.ToShortDateString()))
                                                {
                                                    if (!(String.IsNullOrEmpty(@act.Sha)))
                                                    {
                                                    <p style="float: left; padding: 5px 0 5px 0; width: 100%;">@act.Description
                                                        <a href="https://github.com/ragingsmurf/myLegisData/commit/@act.Sha" 
                                                        class="btn btn-default pull-right" style="margin-right : 5px;" role="button">@act.Sha
                                                            <span class="glyphicon glyphicon-arrow-right" /></a>
                                                    </p>                                        
                                                    }
                                                    else
                                                    { 
                                                    <p>@act.Description</p>
                                                    }
                                                }
                                                <p>
                                                    @if (Model.Minutes.Where(n => n.DateTime.ToShortDateString() == a.Date.Value.ToShortDateString()).Count() != 0)
                                                    {
                                                        @Html.Partial("_bill-minutes-list", Model.Minutes.Where(n => n.DateTime.ToShortDateString() == a.Date.Value.ToShortDateString()).ToList())
                                                    }
                                                </p>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane" id="legislation">
                            <pre class="billtext" style="background-color: #f7f2e6;">  
                                @Model.Copy 
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*    <div class="row marketing">
        <div class="col-lg-6">
            <h4>
                Subheading</h4>
            <p>
                Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>
            <h4>
                Subheading</h4>
            <p>
                Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Cras mattis consectetur
                purus sit amet fermentum.</p>
            <h4>
                Subheading</h4>
            <p>
                Maecenas sed diam eget risus varius blandit sit amet non magna.</p>
        </div>
        <div class="col-lg-6">
            <h4>
                Subheading</h4>
            <p>
                Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>
            <h4>
                Subheading</h4>
            <p>
                Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Cras mattis consectetur
                purus sit amet fermentum.</p>
            <h4>
                Subheading</h4>
            <p>
                Maecenas sed diam eget risus varius blandit sit amet non magna.</p>
        </div>
    </div>*@
    <div class="footer">
        @Html.Partial("_footer")
        <a href="#" id="myText">Selected Text</a>
    </div>
</div>
<!-- /container -->
@section scripts {
    @Scripts.Render("~/bundles/bill")
    <script type="text/javascript">
       




    </script>
}
